## <초급 백엔드 스터디 5주차 WIL>

### <keyword>
트랜잭션, 영속성 컨텍스트, 엔티티 crud

### 배운 내용
- 데이터 조작은 네가지 기능을 주로 구현한다 : crud
- read같은 경우 jpa로 구현 가능 
- (jpa가 만들어주는) 엔티티 매니저로 DB조작 가능 , 변경사항을 모았다가 한번에 SQL 생성
- jpa는 트랜잭션 단위로 동작, 트랜잭션 내부에 일련의 순서가 존재, 트랜잭션은 atomic, 트랜잭션이 끝나면 db에 반영
- 영속성 컨텍스트 : db에서 조회하는 엔티티를 캐싱하거나, jpa가 db에 반영할 모든 변경사항을 보관함 (일종의 버퍼), 영속성 컨텍스트를 기반으로 한번에 SQL 생성
- 비영속 상태 : 영속성 컨텍스트에 달하기 이전 상태-> em.persist()로 영속화 해야함 ->em.flush로 영속성 컨텍스트 내 모든 변경사항을 한꺼번에 db에 반영 
- 엔티티 조회 : em.find()를 통해서 db데이터를 영속성 컨텍스트로 가져옴, em.find()를 한번더 실행하면 db에 쿼리를 보내지 않고 영속성 컨택스트에서 엔티티를 가져옴(가져온 객체와 영속성 컨텍스트에서 존재하던 객체는 동일함)
- 엔티티 수정 : em.find()로 컨텍스트 내부로 가져오고, 이 객체를 수정시, 최초상태와 비교해서 수정된 정보를 엔티티 매니저가 자동으로 변경을 감지해서 SQL작성
- 엔티티 삭제 : em.find()로 영속성 컨텍스트로 가져온 상태에서 em.remove()하면 엔티티를 삭제 상태로 만듬-> 트랜잭션 커밋이나 flush()로 db에서 실제로 삭제  

- 트랜잭션 설정을 위해 꼭 @Transactional 어노테이션을 붙여주자!